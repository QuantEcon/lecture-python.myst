name: Code Style Formatter
on:
  issue_comment:
     types: [created]


jobs:
  format-code:
    if: github.event.issue.pull_request && contains(github.event.comment.body, '@quantecon-code-style')
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout PR branch
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        ref: ${{ github.event.pull_request.head.ref }}
    
    - name: Get changed files
      id: changed-files
      uses: tj-actions/changed-files@v40
      with:
        files: '**/*.md'
    
    - name: Format markdown files
      uses: QuantEcon/meta/.github/actions/code-style-checker@copilot/fix-221-3
      with:
        files: ${{ steps.changed-files.outputs.all_changed_files }}
    
    - name: Push changes
      run: git push